$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://computable-lab.com/schema/computable-lab/assertion.schema.yaml"
title: "Assertion"
description: >
  An assertion is a claim evaluated in a specific scope/context, supported by evidence bundles. Assertions are testable, contextual, and link to results/events via evidence.

type: object
additionalProperties: false
allOf:
- $ref: "./common.schema.yaml#/$defs/FAIRCommon"

required: [ kind, id, claim_ref, statement, scope, evidence_refs ]

properties:
  kind:
    const: "assertion"

  id:
    type: string
    description: "Stable identifier (e.g., ASN-0001)."

  claim_ref:
    $ref: "./datatypes/ref.schema.yaml"
    description: "Reference to the Claim being asserted in context."

  statement:
    type: string
    description: "Human-readable contextual statement."

  scope:
    type: object
    description: "Context scope for the assertion."
    additionalProperties: false
    properties:
      control_context:
        $ref: "./datatypes/ref.schema.yaml"
      treated_context:
        $ref: "./datatypes/ref.schema.yaml"

  outcome:
    type: object
    description: "Optional structured outcome summary."
    additionalProperties: false
    properties:
      measure:
        type: string
      target:
        $ref: "./datatypes/ref.schema.yaml"
      direction:
        type: string
        enum: [ increased, decreased, no_change, mixed, unknown ]
      effect_size:
        type: object
        additionalProperties: true

  evidence_refs:
    type: array
    minItems: 1
    items:
      $ref: "./datatypes/ref.schema.yaml"
    uniqueItems: true
