$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://computable-lab.com/schema/computable-lab/datatypes/file-ref.schema.yaml"
title: "FileRef"
description: >
  A stable pointer to a binary artifact (local path, DVC pointer, S3/IPFS URL, etc.). This is a reference, not the artifact itself.

type: object
additionalProperties: false

required: [ uri ]

properties:
  uri:
    type: string
    description: >
      A resolvable pointer (e.g., s3://..., ipfs://..., https://..., file:..., or a repo-relative path).
    minLength: 1

  role:
    type: string
    description: "Logical role for UI/use (raw_data, processed_data, report, qc, etc.)."

  label:
    type: string
    description: "Human label for the artifact."

  mimeType:
    type: string
    description: "Optional MIME type (e.g., application/pdf, image/png)."

  sizeBytes:
    type: integer
    minimum: 0

  checksum:
    type: object
    additionalProperties: false
    required: [ algo, value ]
    properties:
      algo:
        type: string
        enum: [ sha256, sha1, md5, blake3, other ]
      value:
        type: string
        minLength: 8

  # Convenience field for the common case (optional)
  sha256:
    type: string
    description: "Convenience SHA-256 checksum (hex). Prefer checksum{} for generality."
    pattern: "^[0-9a-fA-F]{64}$"

  createdAt:
    type: string
    format: date-time

  notes:
    type: string
