$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://computable-lab.com/schema/computable-lab/labware-instance.schema.yaml"
title: "LabwareInstance"
description: >
  A concrete, physical instance of a Labware design (e.g., "Plate A for RUN-000041"), optionally identified by barcode. Runs and PlateEvents should reference instances.

type: object
unevaluatedProperties: false
allOf:
- $ref: "./common.schema.yaml#/$defs/FAIRCommon"

required: [ kind, recordId, labwareId ]

properties:
  kind:
    const: "labware-instance"

  recordId:
    type: string
    description: "Stable local identifier (e.g., LBI-000041A)."

  labwareId:
    type: string
    description: "Parent Labware recordId (design/spec)."

  label:
    type: string
    description: "Human label (e.g., 'Plate A (RUN-000041)')."

  barcode:
    type: string
    description: "Optional barcode or externally assigned identifier."

  state:
    type: string
    description: "Optional lifecycle state."
    enum: [ available, in_use, archived, disposed, unknown ]

  location:
    type: object
    description: "Optional location context (lightweight; not inventory-grade)."
    additionalProperties: false
    required: [ kind ]
    properties:
      kind:
        type: string
        description: "Location type (bench, incubator, freezer, instrument, rack, other)."
      ref:
        type: string
        description: "Optional reference to a location record or instrument id."
      label:
        type: string
        description: "Human-readable location label."

  notes:
    type: string
