$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://computable-lab.com/schema/computable-lab/datatypes/plate-event.harvest.schema.yaml"
title: "PlateEventHarvestDetails"
type: object
additionalProperties: false
required: [ from ]

properties:
  from:
    type: object
    additionalProperties: false
    required: [ labwareInstanceId, wells ]
    properties:
      labwareInstanceId:
        $ref: "./ref.schema.yaml"
      wells:
        type: array
        minItems: 1
        items: { type: string }

  volume_uL:
    type: number
    exclusiveMinimum: 0
    description: "Optional harvested volume."

  sampleIds:
    type: array
    description: "Optional produced sample recordIds/refs."
    items:
      $ref: "./ref.schema.yaml"
    uniqueItems: true

  inputs:
    type: array
    description: "Cross-graph lineage: upstream contexts consumed by this harvest."
    items:
      type: object
      additionalProperties: false
      required: [ contextRef ]
      properties:
        contextRef:
          $ref: "./ref.schema.yaml"
          description: "Reference to upstream Context (from another event graph)."
        amount:
          type: object
          additionalProperties: false
          properties:
            value: { type: number }
            unit: { type: string }
          required: [ value, unit ]

  notes:
    type: string
